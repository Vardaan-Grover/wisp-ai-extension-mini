async function mimicHumanTyping(e) { const r = await getCurrentCampaignTabId(); let n = 0; for (; n < e.length;) { const t = e[n]; "char" === charCategorizer(t) ? pressKey(r, t) : breakLine(r), n++, await delay(calculateRandomNumber(50, 150)) } } function pressKey(e, r) { chrome.debugger.sendCommand({ tabId: e }, "Input.dispatchKeyEvent", { type: "keyUp", keyCode: 16 }, (function () { chrome.runtime.lastError && console.error("Failed to send char event:", chrome.runtime.lastError.message) })), chrome.debugger.sendCommand({ tabId: e }, "Input.dispatchKeyEvent", { type: "char", text: r }, (function (e) { chrome.runtime.lastError && console.error("Failed to send char event:", chrome.runtime.lastError.message) })), chrome.debugger.sendCommand({ tabId: e }, "Input.dispatchKeyEvent", { type: "keyDown", keyCode: 65 }, (function (e) { chrome.runtime.lastError && console.error("Failed to send keyDown event:", chrome.runtime.lastError.message) })) } function breakLine(e) { chrome.debugger.sendCommand({ tabId: e }, "Input.dispatchKeyEvent", { type: "keyDown", keyCode: 16 }, (function () { chrome.runtime.lastError && console.error("Failed to send char event:", chrome.runtime.lastError.message) })), chrome.debugger.sendCommand({ tabId: e }, "Input.dispatchKeyEvent", { type: "char", text: "\r" }, (function (e) { chrome.runtime.lastError && console.error("Failed to send char event:", chrome.runtime.lastError.message) })), chrome.debugger.sendCommand({ tabId: e }, "Input.dispatchKeyEvent", { type: "keyDown", keyCode: 16 }, (function (e) { chrome.runtime.lastError && console.error("Failed to send keyDown event:", chrome.runtime.lastError.message) })) } function pressBackspace(e) { chrome.debugger.sendCommand({ tabId: e }, "Input.dispatchKeyEvent", { type: "keyDown", keyCode: 8 }, (function () { chrome.runtime.lastError && console.error("Failed to send keyDown event:", chrome.runtime.lastError.message) })), chrome.debugger.sendCommand({ tabId: e }, "Input.dispatchKeyEvent", { type: "char", text: "\b" }, (function (e) { chrome.runtime.lastError && console.error("Failed to send char event:", chrome.runtime.lastError.message) })), chrome.debugger.sendCommand({ tabId: e }, "Input.dispatchKeyEvent", { type: "keyUp", keyCode: 8 }, (function (e) { chrome.runtime.lastError && console.error("Failed to send keyUp event:", chrome.runtime.lastError.message) })) } function charCategorizer(e) { return isNewLine(e) ? "newline" : "char" } function isNewLine(e) { return "\n" === e || "\r" === e || "\r\n" === e } self.mimicHumanTyping = mimicHumanTyping;